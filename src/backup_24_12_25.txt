/*
  Filename: esp32_oled_typewriter.ino
  Description: Displays "OceanLabz" on OLED with typewriter animation using ESP32
  Author: www.oceanlabz.in
  Modification: 1/4/2025
*/
#include <Arduino.h>  
#include <Wire.h>
#include "Secrets.h"
// #include <Adafruit_GFX.h>
// #include <Adafruit_SSD1306.h>
#include <Adafruit_SH110X.h>

 #include <Adafruit_Sensor.h>
 #include <Adafruit_BME280.h>
// #include <Adafruit_BMP280.h>
// #include <BME280_LITE.h>
//#include "Tiny_BME280.h" // Include the Tiny BME280 library

#include "receiverBoard.h"
#include "sensor.h"
 

 
// Adafruit_BME280 bme; // I2C

// Create display object with custom I2C
Adafruit_SH1106G display = Adafruit_SH1106G(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET); 
 
void setup() {
  
  Serial.begin(9600);
 
  // Start I2C on custom pins (for ESP32)
  Wire.begin(SDA, SCL);
 
//  Initialize the OLED display
  if (!display.begin(ADD_OLED, 0x3C)) {
    Serial.println(F("SSD1306 initialization failed"));
    while (true);  // Stop execution if display fails to initialize
  }
 
  display.clearDisplay();
  display.display();
 
  
  display.setTextColor(SH110X_WHITE);

  // Initialize BME280 sensor
  //  bool status;
  // // default settings
  // // (you can also pass in a Wire library object like &Wire2)
  //  status = bme.begin(0x77, &Wire);  
  // if (!status) { 
  //   Serial.println("Could not find a valid BME280 sensor, check wiring!");
  //   while (1); // Halt execution if sensor is not found
  // }
  
  //Serial.println("BME280 initialized successfully!");

}
 
void loop() {
  display.clearDisplay();
  display.setCursor(0, 20);
  display.setTextSize(2);
  const char* text = "Hukam..";
 
  // Typewriter animation
  for (int i = 0; i < strlen(text); i++) {
    display.print(text[i]);
    display.display();
    delay(200);
  }
 
  delay(2000);
 
  display.clearDisplay();
  display.display();
  delay(500);
  display.setCursor(10, 15);  
  display.setTextSize(1);

  Serial.print("Temperature = "); Serial.print(getTemp()); Serial.println(" *C");
  display.print("Temperature: "); display.print(getTemp()); display.println(" *C");

  display.setCursor(10, 30);  
  Serial.print("Pressure = "); Serial.print(getPressure()); Serial.println(" hPa");
  display.print("Pressure: "); display.print(getPressure()); display.println(" hPa");
   display.setCursor(10, 45);  
  Serial.print("Humidity = "); Serial.print(getHum()); Serial.println(" %");
  display.print("Humidity: "); display.print(getHum()); display.println(" %");
   Serial.println("");
  display.display();
  delay(1000);
}

